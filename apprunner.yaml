version: 1.0
runtime: python3
build:
  commands:
    pre-build:
      - mkdir -p ~/miniconda3
      - wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
      - bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
      - rm -rf ~/miniconda3/miniconda.sh
      - ~/miniconda3/bin/conda init bash
      - ~/miniconda3/bin/conda init zsh
      - exec bash
    build:
      - conda create -n hls_nrt_env
      - conda activate hls_nrt_env
      - conda install conda-requirements.txt
      - pip install -r requirements.txt
      - conda clean -a
  env:
    - PATH
    - ~/miniconda3/bin:$PATH
run:
  runtime-version: 3.8
  command: panel serve bokeh_interact_test.ipynb